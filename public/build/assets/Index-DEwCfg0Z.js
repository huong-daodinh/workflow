import{o as a,c as d,a as H,d as Q,Q as Z,T as S,r as h,y as J,f as T,w as i,g as l,h as s,Z as K,b as e,n as I,m as x,k as p,F as E,z as F,t as u,l as N,i as R,j as W,v as ee,O as te}from"./app-fd2yWfTJ.js";import{I as le}from"./icon-notes-CaaIfv4Y.js";import{I as se}from"./icon-notes-edit-BYoHlYoR.js";import{I as oe}from"./icon-plus-DkODGBl_.js";import{_ as re,a as ne}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-mfDX7rnb.js";import{I as P}from"./icon-trash-lines-CHBUssgZ.js";import{I as z}from"./icon-x-ve0obKwg.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as w}from"./InputError-BXOsc7Y5.js";import{I as ae}from"./icon-file-DauDqZPU.js";import{q as de}from"./index-eVMZg9o0.js";/* empty css                   */import{_ as ce}from"./FileIcon.vue_vue_type_script_setup_true_lang-CMAyjmR7.js";import{I as ue}from"./icon-edit-B85-x3ld.js";import{Y as B,h as C,_ as D,G as M,S as V}from"./transition-B07g8Rew.js";import"./vue.runtime.esm-bundler-CBlZsrJA.js";import"./icon-user.vue_vue_type_script_setup_true_lang-CT92Vnd3.js";const me={},fe={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function pe(_,g){return a(),d("svg",fe,g[0]||(g[0]=[H('<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',8)]))}const ve=ie(me,[["render",pe]]),be={class:"flex gap-5 relative sm:h-[calc(100vh_-_150px)] h-full"},he={class:"flex flex-col h-full pb-16"},xe={class:"flex text-center items-center"},ye={class:"shrink-0"},_e={class:"relative overflow-y-auto ltr:pr-3.5 rtl:pl-3.5 ltr:-mr-3.5 rtl:-ml-3.5 h-full grow"},ge={class:"space-y-1"},ke={class:"flex items-center"},we={class:"ltr:left-0 rtl:right-0 absolute bottom-0 p-4 w-full"},Ce={class:"panel flex-1 overflow-auto h-full"},Ie={class:"pb-5"},$e={key:0,class:"flex justify-center items-center sm:min-h-[500px] min-h-[600px] font-semibold text-lg h-full"},je={key:1,class:"sm:min-h-[300px] min-h-[400px]"},Se={class:"grid 2xl:grid-cols-4 lg:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-5"},Te={class:"panel pb-12 bg-secondary-light shadow-secondary"},Ee={class:"h-[160px]"},Fe={class:"flex justify-between"},Ne={class:"flex items-center w-max"},Pe={class:"flex-none"},ze={key:0,class:"p-0.5 bg-gray-300 dark:bg-gray-700 rounded-full"},Be=["src"],De={key:1,class:"bg-gray-300 dark:bg-gray-700 rounded-full grid place-content-center h-8 w-8"},Me={class:"ltr:ml-2 rtl:mr-2"},Ve={class:"font-semibold"},Ae={class:"text-sx text-white-dark"},Le={class:"mt-2"},Ue={class:"absolute bottom-5 left-0 w-full px-5"},qe={class:"flex items-center justify-between mt-2"},Ge={class:"flex items-center"},Oe=["onClick"],Xe=["onClick"],Ye={class:"fixed inset-0 overflow-y-auto"},He={class:"flex min-h-full items-center justify-center px-4 py-8"},Qe={class:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]"},Ze={class:"p-5"},Je={class:"grid gap-5"},Ke={class:"flex"},Re={class:"bg-[#eee] gap-x-4 p-1 flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed] dark:border-[#17263c] dark:bg-[#1b2e4b]"},We={key:0,class:"space-y-2 my-2"},et={class:"w-full h-1 bg-[#ebedf2] dark:bg-dark/40 rounded-full flex"},tt={key:0},lt={class:"text-sm italic block h-fit underline text-primary"},st=["onClick"],ot={class:"flex justify-end items-center mt-8"},rt=["disabled"],nt={class:"fixed inset-0 overflow-y-auto"},it={class:"flex min-h-full items-center justify-center px-4 py-8"},at={class:"p-5 text-center"},dt={class:"text-white bg-danger ring-4 ring-danger/30 p-4 rounded-full w-fit mx-auto"},ct={class:"flex justify-center items-center mt-8"},Tt=Q({__name:"Index",props:{projects:Array},setup(_){const g=Z(),m=S({file:{}}),v=h(!1),f=h([]),y=h(!1),o=S({id:0,title:"",description:"",files:[],type:"",team_id:null,attachments:[]}),A=h({modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]]},placeholder:""}),L=()=>{o.id?o.patch(route("project.update",o.id),{onSuccess:()=>{k()}}):o.post(route("project.store"),{onSuccess:()=>{k()}})},k=()=>{y.value=!1,o.reset(),o.clearErrors(),m.clearErrors(),f.value=[]},U=()=>{m.post(route("project-attachment.upload"),{onSuccess:()=>{const n=g.props.flash_data.file;o.files.push(n.id);const t={name:n.slug,id:n.id};f.value.push(t)}})},q=n=>{o.files=o.files.filter(t=>t!=n),m.file={},f.value=f.value.filter(t=>t.id!=n)},c=h(!1),$=h("all"),j=(n=null)=>{o.reset(),n&&(o.id=n.id,o.title=n.title,o.description=n.description,o.team_id=n.team_id,n.attachments.forEach(t=>{f.value.push({name:t.slug,id:t.id})})),y.value=!0},G=n=>{o.id=n?n.id:null,v.value=!0},O=()=>{y.value=!1,v.value=!1,o.clearErrors()},X=n=>{$.value=n,c.value=!1};return(n,t)=>{const Y=J("icon-user");return a(),T(re,null,{default:i(()=>[l(s(K),{title:"Project"}),e("div",null,[e("div",be,[e("div",{class:I(["bg-black/60 z-10 w-full h-full rounded-md absolute hidden",{"!block xl:!hidden":c.value}]),onClick:t[0]||(t[0]=r=>c.value=!c.value)},null,2),e("div",{class:I(["panel p-4 flex-none w-[240px] absolute xl:relative z-10 space-y-4 h-full xl:h-auto hidden xl:block ltr:lg:rounded-r-md ltr:rounded-r-none rtl:lg:rounded-l-md rtl:rounded-l-none overflow-hidden",{"hidden shadow":!c.value,"!block h-full ltr:left-0 rtl:right-0":c.value}])},[e("div",he,[e("div",xe,[e("div",ye,[l(le)]),t[11]||(t[11]=e("h3",{class:"text-lg font-semibold ltr:ml-3 rtl:mr-3"},"Dự án",-1))]),t[13]||(t[13]=e("div",{class:"h-px w-full border-b border-[#e0e6ed] dark:border-[#1b2e4b] my-4"},null,-1)),e("div",_e,[e("div",ge,[e("button",{type:"button",class:I(["w-full flex justify-between items-center p-2 hover:bg-white-dark/10 rounded-md dark:hover:text-primary hover:text-primary dark:hover:bg-[#181F32] font-medium h-10",{"bg-gray-100 dark:text-primary text-primary dark:bg-[#181F32]":$.value==="all"}]),onClick:t[1]||(t[1]=r=>X("all"))},[e("div",ke,[l(se,{class:"shrink-0"}),t[12]||(t[12]=e("div",{class:"ltr:ml-3 rtl:mr-3"},"Tất cả",-1))])],2)])])]),e("div",we,[e("button",{class:"btn btn-primary w-full",type:"button",onClick:t[2]||(t[2]=r=>j())},[l(oe,{class:"w-5 h-5 ltr:mr-2 rtl:ml-2 shrink-0"}),t[14]||(t[14]=x(" Thêm dự án mới "))])])],2),e("div",Ce,[e("div",Ie,[e("button",{type:"button",class:"xl:hidden hover:text-primary",onClick:t[3]||(t[3]=r=>c.value=!c.value)},[l(ne)])]),_.projects.length?p("",!0):(a(),d("div",$e," No data available ")),_.projects.length?(a(),d("div",je,[e("div",Se,[(a(!0),d(E,null,F(_.projects,r=>(a(),d("div",{key:r.id},[e("div",Te,[e("div",Ee,[e("div",Fe,[e("div",Ne,[e("div",Pe,[r.created_by.avatar?(a(),d("div",ze,[e("img",{class:"h-8 w-8 rounded-full object-cover",src:r.created_by.avatar},null,8,Be)])):p("",!0),r.created_by.avatar?p("",!0):(a(),d("div",De,[l(Y,{class:"w-4.5 h-4.5"})]))]),e("div",Me,[e("div",Ve,u(r.created_by.name),1),e("div",Ae,u(new Date(r.created_at).toLocaleString()),1)])])]),e("div",Le,[l(s(N),{class:"font-semibold mt-4 overflow-hidden",href:n.route("project.show",{id:r.id})},{default:i(()=>[x(u(r.title),1)]),_:2},1032,["href"])])]),e("div",Ue,[e("div",qe,[e("div",Ge,[e("button",{type:"button",class:"text-danger",onClick:b=>G(r)},[l(P)],8,Oe),e("button",{type:"button",class:"text-warning group ltr:ml-2 rtl:mr-2",onClick:b=>j(r)},[l(ue,{class:"w-4.5 h-4.5 group-hover:fill-warning"})],8,Xe)])])])])]))),128))])])):p("",!0)])])]),l(s(V),{appear:"",show:y.value,as:"template"},{default:i(()=>[l(s(B),{as:"div",onClose:t[7]||(t[7]=r=>y.value=!1),class:"relative z-[51]"},{default:i(()=>[l(s(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[l(s(D),{class:"fixed inset-0 bg-[black]/60"})]),_:1}),e("div",Ye,[e("div",He,[l(s(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[l(s(M),{class:"panel border-0 p-0 rounded-lg w-full max-w-3xl text-black dark:text-white-dark"},{default:i(()=>[e("button",{type:"button",class:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:k},[l(z)]),e("div",Qe,u(s(o).id?"Cập nhật dự án":"Thêm dự án"),1),e("div",Ze,[e("form",{onSubmit:R(L,["prevent"])},[e("div",Je,[e("div",null,[e("div",null,[t[15]||(t[15]=e("label",{for:"title"},"Title",-1)),W(e("input",{id:"title","onUpdate:modelValue":t[4]||(t[4]=r=>s(o).title=r),type:"text",class:"form-input mt-1",placeholder:"Enter Title"},null,512),[[ee,s(o).title]])]),l(w,{message:s(o).errors.title},null,8,["message"])]),e("div",null,[e("div",null,[t[16]||(t[16]=e("label",{for:"title"},"Description",-1)),l(s(de),{ref:"editor1",value:s(o).description,"onUpdate:value":t[5]||(t[5]=r=>s(o).description=r),options:A.value,style:{height:"200px"}},null,8,["value","options"])]),l(w,{message:s(o).errors.description},null,8,["message"])]),e("div",null,[e("div",null,[t[18]||(t[18]=e("label",{for:""},"Upload documents",-1)),e("form",{onChange:U},[e("div",Ke,[e("div",Re,[l(ae),t[17]||(t[17]=x(" Browse "))]),e("input",{type:"file",ref:"uploadFile",onInput:t[6]||(t[6]=r=>{var b;return s(m).file=(b=r.target)==null?void 0:b.files[0]}),class:"form-input rounded-l-none"},null,544)]),s(m).progress?(a(),d("div",We,[e("div",et,[e("div",{class:"bg-success h-1 rounded-full rounded-bl-full text-center text-white text-xs",style:te({width:s(m).progress.percentage+"%"})},null,4)])])):p("",!0),l(w,{message:s(m).errors.file},null,8,["message"]),l(w,{message:s(o).errors.files},null,8,["message"])],32),f.value?(a(),d("div",tt,[(a(!0),d(E,null,F(f.value,(r,b)=>(a(),d("div",{key:b,class:"flex justify-between mt-2 border-b-2 p-1"},[e("span",lt,[l(ce,{extension:r.name.split(".").pop()},null,8,["extension"]),x(" "+u(r.name),1)]),e("span",{class:"text-sm p-1 cursor-pointer hover:text-primary block",onClick:ut=>q(r.id)}," x ",8,st)]))),128))])):p("",!0)])])]),e("div",ot,[e("a",{class:"btn btn-outline-danger cursor-pointer",onClick:k}," Huỷ "),e("button",{type:"submit",class:"btn btn-primary ltr:ml-4 rtl:mr-4",disabled:s(o).processing},[s(o).processing?(a(),T(ve,{key:0,class:"animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2 shrink-0"})):p("",!0),x(" "+u(s(o).id?"Cập nhật":"Thêm"),1)],8,rt)])],32)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),l(s(V),{appear:"",show:v.value,as:"template"},{default:i(()=>[l(s(B),{as:"div",onClose:t[10]||(t[10]=r=>v.value=!1),class:"relative z-[51]"},{default:i(()=>[l(s(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[l(s(D),{class:"fixed inset-0 bg-[black]/60"})]),_:1}),e("div",nt,[e("div",it,[l(s(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[l(s(M),{class:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-3xl text-black dark:text-white-dark"},{default:i(()=>[e("button",{type:"button",class:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:t[8]||(t[8]=r=>v.value=!1)},[l(z)]),t[20]||(t[20]=e("div",{class:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]"}," Xoá dự án ",-1)),e("div",at,[e("div",dt,[l(P)]),t[19]||(t[19]=e("div",{class:"text-base sm:w-3/4 mx-auto mt-5"}," Bạn chắc chắn muốn xoá dự án này ",-1)),e("div",ct,[e("button",{type:"button",class:"btn btn-outline-danger",onClick:t[9]||(t[9]=r=>v.value=!1)},u(n.$t("cancel")),1),l(s(N),{href:n.route("project.destroy",s(o).id),method:"delete",as:"button",class:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:O},{default:i(()=>[x(u(n.$t("delete")),1)]),_:1},8,["href"])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),_:1})}}});export{Tt as default};
