import{d as V,r as S,e as k,T as A,y as F,c as r,b as t,t as a,m as w,F as N,z as B,g as n,w as i,h as d,o as c,i as Y}from"./app-fd2yWfTJ.js";import{M as q}from"./vue3-multiselect.umd.min-CbyIACKa.js";import{Y as z,h as $,_ as G,G as U,S as E}from"./transition-B07g8Rew.js";const H={class:"w-[19rem] w-full h-full bg-primary-light dark:border-[#1b2e4b] dark:bg-dark-light dark:shadow-none"},L={class:"p-3 flex flex-col gap-3"},O={class:"w-full bg-white"},I={class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-4"},J={class:"flex gap-x-5 p-3"},K=["src"],P={key:1,class:"flex justify-center items-center w-12 h-12 text-center rounded-full object-cover bg-info text-lg dark:text-secondary"},Q={class:"text-[#3b3f5c] lg:text-xl text-sm font-semibold dark:text-white-light"},R={class:"text-white-dark lg:text-base text-xs"},W={class:"px-5 w-full bg-white"},X={class:"p-2"},Z={class:"p-2"},tt={class:"p-2"},et={class:"w-full bg-white"},st=["src"],at={key:1,class:"flex justify-center items-center w-12 h-12 text-center rounded-full object-cover bg-info text-lg dark:text-secondary"},ot={class:"text-[#3b3f5c] lg:text-xl text-sm font-semibold dark:text-white-light"},lt={class:"text-white-dark lg:text-base text-xs"},nt={class:"p-3"},rt=["disabled"],it={class:"fixed inset-0 overflow-y-auto"},dt={class:"flex min-h-full items-center justify-center"},ct={class:"p-5"},ut={class:"mb-4"},pt={class:"relative"},_t={class:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 dark:text-white-dark"},ht={class:"flex items-center gap-1 w-1/4 rounded bg-success-light"},ft=["src"],mt={class:"option__desc"},bt={class:"option__title font-bold"},gt={class:"flex gap-2 items-center"},vt=["src"],xt={class:"option__desc"},kt={class:"option__title"},wt={class:"flex gap-x-4"},yt={type:"submit",class:"btn btn-primary w-full"},Ct=V({__name:"TaskSubDetail",props:{task:{type:Object,required:!0},nonFollowers:{type:Array,required:!0}},setup(l){const u=l,h=S([]),f=S(!1),C=k(()=>b(u.task.created_at)),j=k(()=>b(u.task.updated_at)),T=k(()=>b(u.task.due_date)),m=A({followers:Array()}),p=()=>{m.reset(),f.value=!1},D=()=>{m.followers=h.value.map(o=>o.id),m.post(route("task.add-followers",{task:u.task.id}),{preserveScroll:!0,onSuccess:()=>{p()}})};function b(o){const e=new Date(o),g=e.getFullYear(),v=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),x=String(e.getMinutes()).padStart(2,"0"),M=String(e.getSeconds()).padStart(2,"0");return`${g}-${v}-${_} ${s}:${x}:${M}`}const y=o=>o.charAt(0)+o.charAt(1);return console.log(u.nonFollowers),(o,e)=>{var _;const g=F("icon-x"),v=F("icon-users");return c(),r("div",H,[t("div",L,[t("div",O,[t("div",I,a(o.$t("assigner")),1),t("div",J,[l.task.assigner.avatar?(c(),r("img",{key:0,src:l.task.assigner.avatar,class:"w-12 h-12 object-cover rounded-full"},null,8,K)):(c(),r("span",P,a(y(l.task.assigner.name)),1)),t("div",null,[t("h5",Q,a(l.task.assigner.name),1),t("p",R,a(l.task.assigner.role),1)])])]),t("div",W,[t("p",X,[e[2]||(e[2]=t("span",{class:"font-bold"},"Created at:",-1)),w(" "+a(C.value),1)]),t("p",Z,[e[3]||(e[3]=t("span",{class:"font-bold"},"Updated at:",-1)),w(" "+a(j.value),1)]),t("p",tt,[e[4]||(e[4]=t("span",{class:"font-bold"},"Deadline: ",-1)),w(" "+a(T.value),1)])]),t("div",et,[e[5]||(e[5]=t("div",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-4"},"Followers",-1)),(c(!0),r(N,null,B((_=l.task)==null?void 0:_.followers,(s,x)=>(c(),r("div",{class:"flex gap-x-5 p-3",key:x},[s.avatar?(c(),r("img",{key:0,src:s.avatar,class:"w-12 h-12 object-cover rounded-full"},null,8,st)):(c(),r("span",at,a(y(s.name)),1)),t("div",null,[t("h5",ot,a(s.name),1),t("p",lt,a(s.role),1)])]))),128)),t("div",nt,[t("button",{class:"btn btn-primary w-full",onClick:e[0]||(e[0]=s=>f.value=!0),disabled:l.task.status==="closed"}," + Thêm người theo dõi ",8,rt)])])]),n(d(E),{appear:"",show:f.value,as:"template"},{default:i(()=>[n(d(z),{as:"div",onClose:p,class:"relative z-50"},{default:i(()=>[n(d($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[n(d(G),{class:"fixed inset-0 bg-[black]/60"})]),_:1}),t("div",it,[t("div",dt,[n(d($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[n(d(U),{class:"panel border-0 p-0 rounded-lg w-full max-w-2xl text-black dark:text-white-dark"},{default:i(()=>[t("button",{type:"button",class:"absolute top-5 ltr:right-5 rtl:left-5 text-white-dark hover:text-dark outline-none",onClick:p},[n(g)]),e[6]||(e[6]=t("div",{class:"text-lg font-semibold ltr:pl-5 rtl:pr-5 py-5 ltr:pr-[50px] rtl:pl-[50px]"}," Thêm người theo dõi ",-1)),t("div",ct,[t("form",{class:"space-y-5",onSubmit:Y(D,["prevent"])},[t("div",ut,[t("div",pt,[t("span",_t,[n(v)]),n(d(q),{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),options:l.nonFollowers,label:"name",multiple:!0,class:"custom-multiselect","track-by":"id","option-height":104,searchable:!0,placeholder:"Select an user to assign"},{tag:i(s=>[t("div",ht,[t("img",{class:"h-6 w-6 rounded-full",src:s.option.avatar,alt:"avatar"},null,8,ft),t("span",mt,[t("span",bt,a(s.option.name),1)])])]),option:i(s=>[t("div",gt,[t("img",{class:"h-8 w-8 rounded-full",src:s.option.avatar,alt:"avatar"},null,8,vt),t("div",xt,[t("span",kt,a(s.option.name),1)])])]),_:1},8,["modelValue","options"])])]),t("div",wt,[t("button",{type:"button",class:"btn btn-outline-danger w-full",onClick:p},a(o.$t("cancel")),1),t("button",yt,a(o.$t("save")),1)])],32)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}});export{Ct as _};
