import{d as U,r as h,T as P,p as Y,y as D,J as q,f as z,w as i,o as d,g as l,h as n,Z as G,b as e,t as c,m as k,c as u,z as M,F as N,j as w,k as S,i as L,v as X}from"./app-fd2yWfTJ.js";import{_ as H}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-mfDX7rnb.js";import{I as J}from"./icon-user-plus-Dm-EUrKR.js";import{I as O}from"./icon-x-ve0obKwg.js";import{_ as T}from"./InputError-BXOsc7Y5.js";import{M as Z}from"./vue3-multiselect.umd.min-CbyIACKa.js";import{Y as K,h as V,_ as Q,G as R,S as W}from"./transition-B07g8Rew.js";import"./vue.runtime.esm-bundler-CBlZsrJA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./icon-user.vue_vue_type_script_setup_true_lang-CT92Vnd3.js";const ee={class:"flex items-center justify-between flex-wrap gap-4"},te={class:"text-xl"},se={class:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto"},oe={class:"flex gap-3"},ae={class:"mt-5 panel p-0 border-0 overflow-hidden"},le={class:"table-responsive"},ne={class:"table-striped table-hover"},re={class:"whitespace-nowrap"},ie={class:"badge bg-secondary"},ce={class:"flex items-center justify-start -space-x-2 rtl:space-x-reverse text-white"},de=["src"],ue={key:1,class:"flex justify-center items-center w-8 h-8 text-center rounded-full object-cover bg-info text-base ring-2 ring-white dark:ring-white-dark"},pe={class:"flex gap-4 items-center justify-center"},me=["onClick"],_e=["onClick"],ve={class:"fixed inset-0 overflow-y-auto"},fe={class:"flex min-h-full items-center justify-center px-4 py-8"},he={class:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]"},be={class:"p-5"},ye={class:"mb-5"},ge={class:"mb-5"},xe={class:"mb-4"},ke={for:""},we={class:"relative"},Se={class:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 dark:text-white-dark"},Ce={class:"flex items-center gap-1 w-1/4 rounded bg-success-light"},$e=["src"],je={class:"option__desc"},De={class:"option__title font-bold"},Me={class:"flex gap-2 items-center"},Ne=["src"],Te={class:"option__desc"},Ve={class:"option__title"},Ge=U({__name:"IndexPage",props:{departments:{type:Array,required:!0},employees:{type:Array,required:!0}},setup(C){const $=C,p=()=>{b.value=!1,_.value=v.value,a.reset(),a.clearErrors()},m=h([]),_=h([]),v=h([]),b=h(!1),a=P({id:0,name:"",employees:[]}),E=()=>{a.employees=[],m.value.forEach(o=>{a.employees.push(o.id)}),a.id?a.patch(route("department.update",a.id),{preserveScroll:!0,onSuccess:()=>{p()}}):a.post(route("department.store"),{preserveScroll:!0,onSuccess:()=>{p()}})},j=(o=null)=>{a.reset(),m.value=[],_.value=v.value,o&&(a.id=o.id,a.name=o.name,o.employees&&(m.value=o.employees,o.employees.forEach(t=>{_.value.push(t)}))),b.value=!0};function A(o){const t=new Date(o),y=t.getFullYear(),g=String(t.getMonth()+1).padStart(2,"0"),f=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),x=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0");return`${y}-${g}-${f} ${s}:${x}:${r}`}const F=o=>o.charAt(0)+o.charAt(1);Y(()=>{console.log($),v.value=$.employees,_.value=v.value});const I=o=>{console.log("test")};return(o,t)=>{const y=D("tippy"),g=D("icon-users"),f=q("tippy");return d(),z(H,null,{default:i(()=>[l(n(G),{title:"Department"}),e("div",ee,[e("h2",te,c(o.$t("department")),1),e("div",se,[e("div",oe,[e("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=s=>j())},[l(J,{class:"ltr:mr-2 rtl:ml-2"}),t[5]||(t[5]=k(" Tạo phòng ban "))])])])]),e("div",ae,[e("div",le,[e("table",ne,[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",null,"Tên"),e("th",null,"Ngày tạo"),e("th",null,"Nhân viên"),e("th",{class:"!text-center"},"Actions")])],-1)),e("tbody",null,[(d(!0),u(N,null,M(C.departments,(s,x)=>(d(),u("tr",{key:x},[e("td",null,c(s.name),1),e("td",re,[e("span",ie,c(A(s.created_at)),1)]),e("td",null,[e("div",ce,[(d(!0),u(N,null,M(s.employees,(r,B)=>(d(),u("span",{key:B},[r.avatar?w((d(),u("img",{key:0,class:"w-8 h-8 rounded-full object-cover ring-2 ring-white dark:ring-white-dark",src:r.avatar,alt:"avatar"},null,8,de)),[[f]]):S("",!0),r.avatar?S("",!0):w((d(),u("span",ue,[k(c(F(r.name)),1)])),[[f]]),l(y,null,{default:i(()=>[k(c(r.name),1)]),_:2},1024)]))),128))])]),e("td",null,[e("div",pe,[e("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:r=>j(s)}," Sửa ",8,me),s.can_delete?(d(),u("button",{key:0,type:"button",class:"btn btn-sm btn-outline-danger",onClick:r=>I(s)}," Xoá ",8,_e)):S("",!0)])])]))),128))])])])]),l(n(W),{appear:"",show:b.value,as:"template"},{default:i(()=>[l(n(K),{as:"div",onClose:t[4]||(t[4]=s=>p()),class:"relative z-[51]"},{default:i(()=>[l(n(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[l(n(Q),{class:"fixed inset-0 bg-[black]/60"})]),_:1}),e("div",ve,[e("div",fe,[l(n(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[l(n(R),{class:"panel border-0 p-0 rounded-lg w-full max-w-lg text-black dark:text-white-dark"},{default:i(()=>[e("button",{type:"button",class:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:t[1]||(t[1]=s=>p())},[l(O)]),e("div",he,c(n(a).id?"Chỉnh sửa thông tin":"Thêm mới"),1),e("div",be,[e("form",{onSubmit:L(E,["prevent"])},[e("div",ye,[t[7]||(t[7]=e("label",{for:"name"},"Tên",-1)),w(e("input",{id:"name",type:"text",placeholder:"Enter Name",class:"form-input","onUpdate:modelValue":t[2]||(t[2]=s=>n(a).name=s)},null,512),[[X,n(a).name]]),l(T,{message:n(a).errors.name},null,8,["message"])]),e("div",ge,[e("div",xe,[e("label",ke,c(o.$t("members")),1),e("div",we,[e("span",Se,[l(g)]),l(n(Z),{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),options:_.value,label:"name",class:"custom-multiselect",multiple:!0,"track-by":"id","option-height":104,searchable:!0,placeholder:"Chọn thành viên","selected-label":"","select-label":"","deselect-label":""},{tag:i(s=>[e("div",Ce,[e("img",{class:"h-6 w-6 rounded-full",src:s.option.avatar,alt:"avatar"},null,8,$e),e("span",je,[e("span",De,c(s.option.name),1)])])]),option:i(s=>[e("div",Me,[e("img",{class:"h-8 w-8 rounded-full",src:s.option.avatar,alt:"avatar"},null,8,Ne),e("div",Te,[e("span",Ve,c(s.option.name),1)])])]),_:1},8,["modelValue","options"])]),l(T,{message:n(a).errors.employees},null,8,["message"])])]),e("div",{class:"flex justify-end items-center mt-8"},[e("button",{type:"button",class:"btn btn-outline-danger",onClick:p}," Cancel "),t[8]||(t[8]=e("button",{type:"submit",class:"btn btn-primary ltr:ml-4 rtl:mr-4"},"Lưu",-1))])],32)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),_:1})}}});export{Ge as default};
