import{o as n,c as a,a as j,b as t,d as T,Q as I,r as V,T as B,f as P,w as v,g as r,h as l,Z,m as z,n as x,F as C,z as M,k as p,j as d,q as A,t as m,i as D,v as w,P as U,W as F}from"./app-fJPKEAaS.js";import{_ as G}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-ClAzGnZk.js";import{I as H}from"./icon-user-plus-CWoqpOBk.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as X}from"./icon-user.vue_vue_type_script_setup_true_lang-Bw-V_A28.js";import{I as Y}from"./icon-x-BEBhSaFc.js";import{_ as c}from"./InputError-iKmV-a6W.js";import{l as q}from"./lodash-DKNwu6E7.js";import{Y as Q,h as L,_ as W,G as J,S as K}from"./transition-B6GIJNtS.js";import"./vue.runtime.esm-bundler-DHlK8Qv0.js";const O={},R={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function tt(b,u){return n(),a("svg",R,u[0]||(u[0]=[j('<path d="M2 5.5L3.21429 7L7.5 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path opacity="0.5" d="M2 12.5L3.21429 14L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 19.5L3.21429 21L7.5 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 19L12 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path opacity="0.5" d="M22 12L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M22 5L12 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>',6)]))}const et=S(O,[["render",tt]]),ot={},st={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function lt(b,u){return n(),a("svg",st,u[0]||(u[0]=[t("path",{opacity:"0.5",d:"M2.5 6.5C2.5 4.61438 2.5 3.67157 3.08579 3.08579C3.67157 2.5 4.61438 2.5 6.5 2.5C8.38562 2.5 9.32843 2.5 9.91421 3.08579C10.5 3.67157 10.5 4.61438 10.5 6.5C10.5 8.38562 10.5 9.32843 9.91421 9.91421C9.32843 10.5 8.38562 10.5 6.5 10.5C4.61438 10.5 3.67157 10.5 3.08579 9.91421C2.5 9.32843 2.5 8.38562 2.5 6.5Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),t("path",{opacity:"0.5",d:"M13.5 17.5C13.5 15.6144 13.5 14.6716 14.0858 14.0858C14.6716 13.5 15.6144 13.5 17.5 13.5C19.3856 13.5 20.3284 13.5 20.9142 14.0858C21.5 14.6716 21.5 15.6144 21.5 17.5C21.5 19.3856 21.5 20.3284 20.9142 20.9142C20.3284 21.5 19.3856 21.5 17.5 21.5C15.6144 21.5 14.6716 21.5 14.0858 20.9142C13.5 20.3284 13.5 19.3856 13.5 17.5Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),t("path",{d:"M2.5 17.5C2.5 15.6144 2.5 14.6716 3.08579 14.0858C3.67157 13.5 4.61438 13.5 6.5 13.5C8.38562 13.5 9.32843 13.5 9.91421 14.0858C10.5 14.6716 10.5 15.6144 10.5 17.5C10.5 19.3856 10.5 20.3284 9.91421 20.9142C9.32843 21.5 8.38562 21.5 6.5 21.5C4.61438 21.5 3.67157 21.5 3.08579 20.9142C2.5 20.3284 2.5 19.3856 2.5 17.5Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),t("path",{d:"M13.5 6.5C13.5 4.61438 13.5 3.67157 14.0858 3.08579C14.6716 2.5 15.6144 2.5 17.5 2.5C19.3856 2.5 20.3284 2.5 20.9142 3.08579C21.5 3.67157 21.5 4.61438 21.5 6.5C21.5 8.38562 21.5 9.32843 20.9142 9.91421C20.3284 10.5 19.3856 10.5 17.5 10.5C15.6144 10.5 14.6716 10.5 14.0858 9.91421C13.5 9.32843 13.5 8.38562 13.5 6.5Z",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const rt=S(ot,[["render",lt]]),nt={class:"flex items-center justify-between flex-wrap gap-4"},at={class:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto"},it={class:"flex gap-3"},dt={class:"mt-5 panel p-0 border-0 overflow-hidden"},mt={key:0,class:"table-responsive"},pt={class:"table-striped table-hover"},ct={class:"flex items-center w-max"},ut={key:0,class:"w-max"},bt=["src"],ft={class:"border border-gray-300 dark:border-gray-800 rounded-full grid place-content-center h-8 w-8 ltr:mr-2 rtl:ml-2"},ht={class:"whitespace-nowrap"},vt={class:"whitespace-nowrap"},gt={key:0,class:"badge bg-success"},kt={key:1,class:"badge bg-danger"},wt={key:0,class:"flex gap-4 items-center justify-center"},_t=["onClick"],yt=["onClick"],xt={key:0,class:"grid 2xl:grid-cols-4 xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6 w-full"},Ct={class:"bg-white/40 rounded-t-md bg-[url('/assets/images/notification-bg.png')] bg-center bg-cover p-6 pb-0"},Mt=["src"],$t={class:"px-6 pb-24 -mt-10 relative"},Vt={class:"shadow-md bg-white dark:bg-gray-900 rounded-md px-2 py-4"},Ut={class:"text-xl"},Lt={class:"text-white-dark"},St={class:"mt-6 grid grid-cols-1 gap-4 ltr:text-left rtl:text-right"},Et={class:"flex items-center"},Nt={class:"truncate text-white-dark"},jt={class:"flex items-center"},Tt={class:"text-white-dark"},It={key:0,class:"mt-6 flex gap-4 absolute bottom-0 w-full ltr:left-0 rtl:right-0 p-6"},Bt=["onClick"],Pt=["onClick"],Zt={class:"fixed inset-0 overflow-y-auto"},zt={class:"flex min-h-full items-center justify-center px-4 py-8"},At={class:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]"},Dt={class:"p-5"},Ft={class:"mb-5"},Gt={class:"mb-5"},Ht={key:0,class:"mb-5"},Xt={key:1,class:"mb-5"},Yt={class:"mb-5"},qt={class:"mb-5"},Qt=["disabled"],Wt={class:"mb-5"},Jt=["disabled"],Kt=["value"],Ot={class:"mb-5"},Rt={class:"w-12 h-6 relative"},me=T({__name:"IndexPage",props:{users:Array,departments:Array},setup(b){const u=I(),f=V("list"),E=b,g=()=>{_.value=!1,q.delay(100),s.reset(),s.clearErrors()},h=u.props.auth.user;console.log(h),console.log(E.departments);const _=V(!1),s=B({id:0,name:"",email:"",role:h.role==="manager"?"member":"",phone:"",avatar:null,password:"",password_confirmation:"",active:!1,department_id:h.role==="manager"?h.department_id:null}),N=()=>{s.id?s.patch(route("user.update",s.id),{preserveScroll:!0,onSuccess:()=>{g()}}):s.post(route("user.store"),{preserveScroll:!0,onSuccess:()=>{g()}})},y=(i=null)=>{s.reset(),i&&(s.id=i.id,s.name=i.name,s.email=i.email,s.role=i.role,s.phone=i.phone,s.active=!!i.active,s.department_id=i.department_id),_.value=!0},$=i=>{console.log("test")};return(i,e)=>(n(),P(G,null,{default:v(()=>[r(l(Z),{title:"Department"}),t("div",nt,[e[14]||(e[14]=t("h2",{class:"text-xl"},"Contacts",-1)),t("div",at,[t("div",it,[t("div",null,[t("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=o=>y())},[r(H,{class:"ltr:mr-2 rtl:ml-2"}),e[13]||(e[13]=z(" Tạo tài khoản nhân viên "))])]),t("div",null,[t("button",{type:"button",class:x(["btn btn-outline-primary p-2",{"bg-primary text-white":f.value==="list"}]),onClick:e[1]||(e[1]=o=>f.value="list")},[r(et)],2)]),t("div",null,[t("button",{type:"button",class:x(["btn btn-outline-primary p-2",{"bg-primary text-white":f.value==="grid"}]),onClick:e[2]||(e[2]=o=>f.value="grid")},[r(rt)],2)])])])]),t("div",dt,[f.value==="list"?(n(),a("div",mt,[t("table",pt,[e[15]||(e[15]=t("thead",null,[t("tr",null,[t("th",null,"Tên"),t("th",null,"Email"),t("th",null,"Vai trò"),t("th",null,"Trạng thái tài khoản"),t("th",{class:"!text-center"},"Actions")])],-1)),t("tbody",null,[(n(!0),a(C,null,M(b.users,o=>(n(),a("tr",{key:o.id},[t("td",null,[t("div",ct,[o.avatar?(n(),a("div",ut,[t("img",{src:o.avatar,class:"h-8 w-8 rounded-full object-cover ltr:mr-2 rtl:ml-2",alt:"avatar"},null,8,bt)])):p("",!0),d(t("div",ft,[r(X,{class:"w-4.5 h-4.5"})],512),[[A,!o.avatar]]),t("div",null,m(o.name),1)])]),t("td",null,m(o.email),1),t("td",ht,[t("span",{class:x(["badge",{"badge-outline-warning":o.role==="manager","badge-outline-secondary":o.role==="member"}])},m(o.role=="member"?"Nhân viên":o.role=="manager"?"Trưởng phòng":""),3)]),t("td",vt,[o.active?(n(),a("span",gt,"Hoạt động")):(n(),a("span",kt,"Vô hiệu hoá"))]),t("td",null,[o.can_action?(n(),a("div",wt,[t("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:k=>y(o)}," Sửa ",8,_t),t("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:k=>$(o)}," Xoá ",8,yt)])):p("",!0)])]))),128))])])])):p("",!0)]),f.value==="grid"?(n(),a("div",xt,[(n(!0),a(C,null,M(b.users,o=>(n(),a("div",{key:o.id,class:"bg-white dark:bg-[#1c232f] rounded-md overflow-hidden text-center shadow relative"},[t("div",Ct,[o.avatar?(n(),a("img",{key:0,class:"object-contain w-4/5 max-h-40 mx-auto",src:o.avatar},null,8,Mt)):p("",!0)]),t("div",$t,[t("div",Vt,[t("div",Ut,m(o.name),1),t("div",Lt,m(o.role),1)]),t("div",St,[t("div",Et,[e[16]||(e[16]=t("div",{class:"flex-none ltr:mr-2 rtl:ml-2"},"Email :",-1)),t("div",Nt,m(o.email),1)]),t("div",jt,[e[17]||(e[17]=t("div",{class:"flex-none ltr:mr-2 rtl:ml-2"},"Phone :",-1)),t("div",Tt,m(o.phone),1)])])]),o.can_action?(n(),a("div",It,[t("button",{type:"button",class:"btn btn-outline-primary w-1/2",onClick:k=>y(o)}," Edit ",8,Bt),t("button",{type:"button",class:"btn btn-outline-danger w-1/2",onClick:k=>$(o)}," Delete ",8,Pt)])):p("",!0)]))),128))])):p("",!0),r(l(K),{appear:"",show:_.value,as:"template"},{default:v(()=>[r(l(Q),{as:"div",onClose:e[12]||(e[12]=o=>g()),class:"relative z-[51]"},{default:v(()=>[r(l(L),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[r(l(W),{class:"fixed inset-0 bg-[black]/60"})]),_:1}),t("div",Zt,[t("div",zt,[r(l(L),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:v(()=>[r(l(J),{class:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark"},{default:v(()=>[t("button",{type:"button",class:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:e[3]||(e[3]=o=>g())},[r(Y)]),t("div",At,m(l(s).id?"Chỉnh sửa thông tin":"Thêm mới"),1),t("div",Dt,[t("form",{onSubmit:D(N,["prevent"])},[t("div",Ft,[e[18]||(e[18]=t("label",{for:"name"},"Họ tên",-1)),d(t("input",{id:"name",type:"text",placeholder:"Enter Name",class:"form-input","onUpdate:modelValue":e[4]||(e[4]=o=>l(s).name=o)},null,512),[[w,l(s).name]]),r(c,{message:l(s).errors.name},null,8,["message"])]),t("div",Gt,[e[19]||(e[19]=t("label",{for:"email"},"Email",-1)),d(t("input",{id:"email",type:"email",placeholder:"Enter Email",class:"form-input","onUpdate:modelValue":e[5]||(e[5]=o=>l(s).email=o)},null,512),[[w,l(s).email]]),r(c,{message:l(s).errors.email},null,8,["message"])]),l(s).id?p("",!0):(n(),a("div",Ht,[e[20]||(e[20]=t("label",{for:"password"},"Mật khẩu",-1)),d(t("input",{id:"password",type:"password",placeholder:"Nhập mật khẩu",class:"form-input","onUpdate:modelValue":e[6]||(e[6]=o=>l(s).password=o)},null,512),[[w,l(s).password]]),r(c,{message:l(s).errors.password},null,8,["message"])])),l(s).id?p("",!0):(n(),a("div",Xt,[e[21]||(e[21]=t("label",{for:"password_confirmation"},"Nhập lại mật khẩu",-1)),d(t("input",{id:"password_confirmation",type:"password",placeholder:"Nhập lại mật khẩu",class:"form-input","onUpdate:modelValue":e[7]||(e[7]=o=>l(s).password_confirmation=o)},null,512),[[w,l(s).password_confirmation]]),r(c,{message:l(s).errors.password_confirmation},null,8,["message"])])),t("div",Yt,[e[22]||(e[22]=t("label",{for:"number"},"Số điện thoại",-1)),d(t("input",{id:"number",placeholder:"Enter Phone Number",class:"form-input","onUpdate:modelValue":e[8]||(e[8]=o=>l(s).phone=o)},null,512),[[w,l(s).phone]]),r(c,{message:l(s).errors.phone},null,8,["message"])]),t("div",qt,[e[24]||(e[24]=t("label",{for:"occupation"},"Vai trò",-1)),d(t("select",{id:"occupation",disabled:l(h).role!=="admin",class:"form-select text-white-dark","onUpdate:modelValue":e[9]||(e[9]=o=>l(s).role=o)},e[23]||(e[23]=[t("option",{value:"manager"},"Trưởng phòng",-1),t("option",{value:"member"},"Nhân viên",-1)]),8,Qt),[[U,l(s).role]]),r(c,{message:l(s).errors.role},null,8,["message"])]),t("div",Wt,[e[25]||(e[25]=t("label",{for:"occupation"},"Phòng ban",-1)),d(t("select",{id:"occupation",disabled:l(h).role!=="admin",class:"form-select text-white-dark","onUpdate:modelValue":e[10]||(e[10]=o=>l(s).department_id=o)},[(n(!0),a(C,null,M(b.departments,(o,k)=>(n(),a("option",{value:o.id,key:k},m(o.name),9,Kt))),128))],8,Jt),[[U,l(s).department_id]]),r(c,{message:l(s).errors.role},null,8,["message"])]),t("div",Ot,[e[27]||(e[27]=t("label",{for:"active"},"Active",-1)),t("label",Rt,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>l(s).active=o),class:"custom_switch absolute w-full h-full opacity-0 z-10 cursor-pointer peer",id:"active"},null,512),[[F,l(s).active]]),e[26]||(e[26]=t("span",{for:"active",class:"bg-[#ebedf2] dark:bg-dark block h-full rounded-full before:absolute before:left-1 before:bg-white dark:before:bg-white-dark dark:peer-checked:before:bg-white before:bottom-1 before:w-4 before:h-4 before:rounded-full peer-checked:before:left-7 peer-checked:bg-primary before:transition-all before:duration-300"},null,-1))]),r(c,{message:l(s).errors.active},null,8,["message"])]),t("div",{class:"flex justify-end items-center mt-8"},[t("button",{type:"button",class:"btn btn-outline-danger",onClick:g}," Cancel "),e[28]||(e[28]=t("button",{type:"submit",class:"btn btn-primary ltr:ml-4 rtl:mr-4"},"Lưu",-1))])],32)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),_:1}))}});export{me as default};
